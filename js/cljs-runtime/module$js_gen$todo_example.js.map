{
"version":3,
"file":"module$js_gen$todo_example.js",
"lineCount":48,
"mappings":"A;AAEA,MAAM,CACJ,iBAAAA,4CADI,EAEJ,YAAAC,uCAFI,EAGJ,SAAAC,oCAHI,CAAA,GAIFC,MAJE,CAIKC,QAJL,CAIcC,KAJpB;AAKA,MAAMC,qCAAS,CACbC,OAAQ,CACN,aAAc,CACZ,aAAc,qBADF,CADR,EAIN,gBAAiB,CACf,gBAAiB,cADF,EAEf,kBAAmB,qBAFJ,CAJX,EAQN,cAAe,CACb,gBAAiB,cADJ,EAEb,kBAAmB,qBAFN,CART,CADK,EAcbC,YAAa,CAAC,CACZ,SAAU,EADE,EAEZ,aAAc,QAFF,CAAD,EAGV,CACD,SAAU,EADT,EAED,aAAc,UAFb,CAHU,EAMV,CACD,SAAU,EADT,EAED,gBAAiB,SAFhB,CANU,EASV,CACD,SAAU,EADT,EAED,gBAAiB,OAFhB,CATU,EAYV,CACD,aAAc,UADb,EAED,cAAe,EAFd;AAGD,gBAAiB,EAHhB,EAID,mBAAoB,IAAIC,IAAJ,CAAS,YAAT,CAJnB,CAZU,EAiBV,CACD,aAAc,SADb,EAED,cAAe,EAFd,EAGD,gBAAiB,EAHhB,EAID,mBAAoB,IAAIA,IAAJ,CAAS,WAAT,CAJnB,CAjBU,CAdA,CAAf;AAsCO,MAAMC,kCAAM,EAAAA,IACGC,+BAAA,CAAMC,aAAN,CAAoBZ,4CAApB,EAAsC,CACxDM,OAAQA,kCADgD,CAAtC,EAEJK,+BAAA,CAAMC,aAAN,CAAoBC,iCAApB,EAA2B,IAA3B,CAFI,CADf;AAMP,MAAMA,oCAAQ,EAAAA,IACQF,+BAAA,CAAMC,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAA8CD,+BAAA,CAAMC,aAAN,CAAoBE,qCAApB,EAA+B,IAA/B,CAA9C,EAAiGH,+BAAA,CAAMC,aAAN,CAAoBG,oCAApB,EAA8B,IAA9B,CAAjG,CADtB;AAIA,MAAMD,wCAAY,EAAAA,IAAM;AACtB,QAAM,CAACE,QAAD,CAAA,GAAaf,uCAAA,EAAnB;AACA,SAAoBU,+BAAA,CAAMC,aAAN,CAAoB,MAApB,EAA4B,CAC9CK,SAAUC,CAAAD,IAAK;AACbC,KAAA,CAAEC,cAAF,EAAA;AAEAH,YAAA,CAAS,CAAC,CACR,aAAcE,CAAA,CAAEE,MAAF,CAASC,QAAT,CAAkB,YAAlB,CAAd,CAA8CC,KADtC,EAER,mBAAoB,IAAIb,IAFhB,CAAD,CAAT,CAAA;AAIAS,KAAA,CAAEE,MAAF,CAASG,KAAT,EAAA;AAPa,GAD+B,CAA5B,EAUJZ,+BAAA,CAAMC,aAAN,CAAoB,OAApB,EAA6B,CAC3CY,UAAW,IADgC,EAE3CC,KAAM,MAFqC,EAG3CC,KAAM,YAHqC,EAI3CC,YAAa,wBAJ8B,EAK3CC,aAAc,KAL6B,EAM3CC,SAAU,IANiC,CAA7B,CAVI,CAApB;AAFsB,CAAxB;AAsBA,MAAMd,uCAAW,EAAAA,IAAM;AACrB,QAAM,CAACe,KAAD,CAAA,GAAU5B,oCAAA,CAAS;iCAAT,CAAhB;AAEA,SAAoBS,+BAAA,CAAMC,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAAiCkB,KAAA,CAAMC,IAAN,CAAW,CAACC,CAAD,EAAIC,CAAJ,CAAA,IAAUD,CAAA,CAAEE,GAAF,CAAM,kBAAN,CAAA,GAA4BD,CAAA,CAAEC,GAAF,CAAM,kBAAN,CAA5B,GAAwD,EAAxD,GAA6D,CAAlF,CAAA,CAAqFC,GAArF,CAAyFC,IAAA,IAAqBzB,+BAAA,CAAMC,aAAN,CAAoByB,gCAApB,EAA0B,CAC3LC,IAAKF,IAAA,CAAKF,GAAL,CAAS,QAAT,CADsL,EAErLE,IAFqL,CAA1B,CAA9G,CAAjC,CAApB;AAHqB,CAAvB;AASA,MAAMC,mCAAQ,0BAADA,IAEM;AAFL,MAAA,CACZD,IADY,CAAA,GAAA,0BAAA;AAEK,SAAAzB,+BAAA,CAAMC,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAA8CD,+BAAA,CAAMC,aAAN,CAAoB,IAApB,EAA0B,IAA1B,CAA9C,EAA4FD,+BAAA,CAAMC,aAAN,CAAoB2B,qCAApB,EAA+B,CACtIH,IADsI,CAA/B,CAA5F,EAEFzB,+BAAA,CAAMC,aAAN,CAAoB,MAApB,EAA4B,CAC3C4B,MAAOJ,IAAA,CAAKF,GAAL,CAAS,kBAAT,CAAA,GAA+B,CACpCO,eAAgB,eADoB,CAA/B,GAEH,IAHuC,CAA5B,EAIdL,IAAA,CAAKF,GAAL,CAAS,YAAT,CAJc,CAFE,EAMsBvB,+BAAA,CAAMC,aAAN,CAAoB,IAApB,EAA0B,IAA1B,CANtB,EAMoED,+BAAA,CAAMC,aAAN,CAAoB8B,uCAApB;AAAiC,GAChHN,IADgH,CAAjC,CANpE,EAQf,KARe,EAQWzB,+BAAA,CAAMC,aAAN,CAAoB+B,qCAApB,EAA+B,CACrDP,IADqD,CAA/B,CARX,EAUFzB,+BAAA,CAAMC,aAAN,CAAoB,IAApB,EAA0B,IAA1B,CAVE,EAU4CD,+BAAA,CAAMC,aAAN,CAAoB,OAApB,EAA6B,CAC1F4B,MAAO,CACLI,MAAO,MADF,CADmF,CAA7B,EAI5DR,IAAA,CAAKF,GAAL,CAAS,kBAAT,CAAA,CAA6BW,cAA7B,EAJ4D,CAV5C,CAAA;AAAA,CAFnB;AAkBA,MAAMN,wCAAa,0BAADA,IAEZ;AAFa,MAAA,CACjBH,IADiB,CAAA,GAAA,0BAAA;AAGjB,QAAM,CAACpB,QAAD,CAAA,GAAaf,uCAAA,EAAnB;AACA,SAAoBU,+BAAA,CAAMC,aAAN,CAAoB,OAApB,EAA6B,CAC/Ca,KAAM,UADyC,EAE/CH,MAAO,CAAC,CAACc,IAAA,CAAKF,GAAL,CAAS,kBAAT,CAFsC,EAG/CY,SAAU5B,CAAA4B,IAAK9B,QAAA,CAAS,CAAC,CACvB,SAAUoB,IAAA,CAAKF,GAAL,CAAS,QAAT,CADa,EAEvB,mBAAoBhB,CAApB,CAAsBE,MAAtB,CAA6B2B,OAFN,CAAD,CAAT,CAHgC,CAA7B,CAApB;AAFI,CAFN;AAcA,MAAML,0CAAe,0BAADA,IAEd;AAFe,MAAA,CACnBN,IADmB,CAAA,GAAA,0BAAA;AAGnB,QAAM,CAACpB,QAAD,CAAA,GAAaf,uCAAA,EAAnB;AACA,QAAM,CAAC+C,QAAD,CAAA,GAAa9C,oCAAA,CAAS;uCAAT,CAAnB;AAEA,SAAoBS,+BAAA,CAAMC,aAAN,CAAoBD,+BAApB,CAA0BsC,QAA1B,EAAoC,IAApC,EAAuDtC,+BAAA,CAAMC,aAAN,CAAoB,OAApB,EAA6B,CACtGsC,QAAS,eAATA,GAA2Bd,IAAA,CAAKF,GAAL,CAAS,QAAT,CAD2E,CAA7B,EAExE,UAFwE,CAAvD,EAESvB,+BAAA,CAAMC,aAAN,CAAoB,QAApB,EAA8B,CACzDc,KAAM,UADmD,EAEzDyB,GAAI,eAAJA,GAAsBf,IAAA,CAAKF,GAAL,CAAS,QAAT,CAFmC,EAGzDZ,MAAOc,IAAA,CAAKF,GAAL,CAAS,eAAT,EAA0B,QAA1B,CAAPZ,IAA8C,EAHW,EAIzDwB,SAAU5B,CAAA4B,IAAK9B,QAAA,CAAS,CAAC,CACvB,SAAUoB,IAAA,CAAKF,GAAL,CAAS,QAAT,CADa,EAEvB,gBAAiBkB,MAAA,CAAOlC,CAAP,CAASE,MAAT,CAAgBE,KAAhB,CAFM,CAAD,CAAT,CAJ0C,CAA9B,EAQbX,+BAAA,CAAMC,aAAN,CAAoB,QAApB;AAA8B,GAC5CU,MAAO,EADqC,CAA9B,CARa,EAUzB0B,QAAA,CAASb,GAAT,CAAakB,OAAA,IAAwB1C,+BAAA,CAAMC,aAAN,CAAoB,QAApB,EAA8B,CACrE0B,IAAKe,OAAA,CAAQnB,GAAR,CAAY,QAAZ,CADgE,EAErEZ,MAAO+B,OAAA,CAAQnB,GAAR,CAAY,QAAZ,CAF8D,CAA9B,EAGtCmB,OAAA,CAAQnB,GAAR,CAAY,eAAZ,CAHsC,CAArC,CAVyB,CAFT,CAApB;AAJI,CAFN;AAwBA,MAAMS,wCAAa,0BAADA,IAEZ;AAFa,MAAA,CACjBP,IADiB,CAAA,GAAA,0BAAA;AAGjB,QAAM,CAACpB,QAAD,CAAA,GAAaf,uCAAA,EAAnB;AACA,QAAM,CAACqD,KAAD,CAAA,GAAUpD,oCAAA,CAAS;iCAAT,CAAhB;AAEA,SAAoBS,+BAAA,CAAMC,aAAN,CAAoBD,+BAApB,CAA0BsC,QAA1B,EAAoC,IAApC,EAAuDtC,+BAAA,CAAMC,aAAN,CAAoB,OAApB,EAA6B,CACtGsC,QAAS,aAATA,GAAyBd,IAAA,CAAKF,GAAL,CAAS,QAAT,CAD6E,CAA7B,EAExE,QAFwE,CAAvD,EAEOvB,+BAAA,CAAMC,aAAN,CAAoB,QAApB,EAA8B,CACvDc,KAAM,OADiD,EAEvDyB,GAAI,aAAJA,GAAoBf,IAAA,CAAKF,GAAL,CAAS,QAAT,CAFmC,EAGvDZ,MAAOc,IAAA,CAAKF,GAAL,CAAS,aAAT,EAAwB,QAAxB,CAAPZ,IAA4C,EAHW,EAIvDwB,SAAU5B,CAAA4B,IAAK9B,QAAA,CAAS,CAAC,CACvB,SAAUoB,IAAA,CAAKF,GAAL,CAAS,QAAT,CADa,EAEvB,cAAekB,MAAA,CAAOlC,CAAP,CAASE,MAAT,CAAgBE,KAAhB,CAFQ,CAAD,CAAT,CAJwC,CAA9B,EAQXX,+BAAA,CAAMC,aAAN,CAAoB,QAApB;AAA8B,GAC5CU,MAAO,EADqC,CAA9B,CARW,EAUvBgC,KAAA,CAAMnB,GAAN,CAAUoB,IAAA,IAAqB5C,+BAAA,CAAMC,aAAN,CAAoB,QAApB,EAA8B,CAC/D0B,IAAKiB,IAAA,CAAKrB,GAAL,CAAS,QAAT,CAD0D,EAE/DZ,MAAOiC,IAAA,CAAKrB,GAAL,CAAS,QAAT,CAFwD,CAA9B,EAGhCqB,IAAA,CAAKrB,GAAL,CAAS,YAAT,CAHgC,CAA/B,CAVuB,CAFP,CAApB;AAJI,CAFN;AA9IA,cAAA,IAAAsB,6BAAA,EAAA;AA6Ca9C,cAAAA,0BAAAA,CAAAA,GAAAA,GAAAA,+BAAAA;;",
"sources":["js_gen/todo-example.js"],
"sourcesContent":["import React from 'goog:module$node_modules$react$index'; // import { HomebaseProvider, useTransact, useQuery } from 'homebase-react'\n\nconst {\n  HomebaseProvider,\n  useTransact,\n  useQuery\n} = window.homebase.react;\nconst config = {\n  schema: {\n    ':user/name': {\n      ':db/unique': ':db.unique/identity'\n    },\n    ':todo/project': {\n      ':db/valueType': ':db.type/ref',\n      ':db/cardinality': ':db.cardinality/one'\n    },\n    ':todo/owner': {\n      ':db/valueType': ':db.type/ref',\n      ':db/cardinality': ':db.cardinality/one'\n    }\n  },\n  initialData: [{\n    ':db/id': -1,\n    ':user/name': 'Stella'\n  }, {\n    ':db/id': -2,\n    ':user/name': 'Arpegius'\n  }, {\n    ':db/id': -3,\n    ':project/name': 'Make it'\n  }, {\n    ':db/id': -4,\n    ':project/name': 'Do it'\n  }, {\n    ':todo/name': 'Fix ship',\n    ':todo/owner': -1,\n    ':todo/project': -3,\n    ':todo/created-at': new Date('2003/11/10')\n  }, {\n    ':todo/name': 'Go home',\n    ':todo/owner': -2,\n    ':todo/project': -4,\n    ':todo/created-at': new Date('2003/11/9')\n  }]\n};\nexport const App = () => {\n  return /*#__PURE__*/React.createElement(HomebaseProvider, {\n    config: config\n  }, /*#__PURE__*/React.createElement(Todos, null));\n};\n\nconst Todos = () => {\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(TodoInput, null), /*#__PURE__*/React.createElement(TodoList, null));\n};\n\nconst TodoInput = () => {\n  const [transact] = useTransact();\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault(); // transact([[].reduce.call(e.target.elements, (data, el) => ({ ...data, [el.name]: el.value}), {})])\n\n      transact([{\n        ':todo/name': e.target.elements[':todo/name'].value,\n        ':todo/created-at': new Date()\n      }]);\n      e.target.reset();\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    autoFocus: true,\n    type: \"text\",\n    name: \":todo/name\",\n    placeholder: \"What needs to be done?\",\n    autoComplete: \"off\",\n    required: true\n  }));\n};\n\nconst TodoList = () => {\n  const [todos] = useQuery(`[:find ?todo\n      :where [?todo :todo/name]]`);\n  return /*#__PURE__*/React.createElement(\"div\", null, todos.sort((a, b) => a.get(':todo/created-at') > b.get(':todo/created-at') ? -1 : 1).map(todo => /*#__PURE__*/React.createElement(Todo, {\n    key: todo.get(':db/id'),\n    todo: todo\n  })));\n};\n\nconst Todo = ({\n  todo\n}) => /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(TodoCheck, {\n  todo: todo\n}), /*#__PURE__*/React.createElement(\"span\", {\n  style: todo.get(':todo/completed?') ? {\n    textDecoration: 'line-through '\n  } : null\n}, todo.get(':todo/name')), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(TodoProject, {\n  todo: todo\n}), \"\\xA0|\\xA0\", /*#__PURE__*/React.createElement(TodoOwner, {\n  todo: todo\n}), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"small\", {\n  style: {\n    color: 'grey'\n  }\n}, todo.get(':todo/created-at').toLocaleString()));\n\nconst TodoCheck = ({\n  todo\n}) => {\n  const [transact] = useTransact();\n  return /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    value: !!todo.get(':todo/completed?'),\n    onChange: e => transact([{\n      ':db/id': todo.get(':db/id'),\n      ':todo/completed?': e.target.checked\n    }])\n  });\n};\n\nconst TodoProject = ({\n  todo\n}) => {\n  const [transact] = useTransact();\n  const [projects] = useQuery(`[:find ?project\n      :where [?project :project/name]]`);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: 'todo-project-' + todo.get(':db/id')\n  }, \"Project:\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"projects\",\n    id: 'todo-project-' + todo.get(':db/id'),\n    value: todo.get(':todo/project', ':db/id') || '',\n    onChange: e => transact([{\n      ':db/id': todo.get(':db/id'),\n      ':todo/project': Number(e.target.value)\n    }])\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\"\n  }), projects.map(project => /*#__PURE__*/React.createElement(\"option\", {\n    key: project.get(':db/id'),\n    value: project.get(':db/id')\n  }, project.get(':project/name')))));\n};\n\nconst TodoOwner = ({\n  todo\n}) => {\n  const [transact] = useTransact();\n  const [users] = useQuery(`[:find ?user\n      :where [?user :user/name]]`);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: 'todo-owner-' + todo.get(':db/id')\n  }, \"Owner:\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"users\",\n    id: 'todo-owner-' + todo.get(':db/id'),\n    value: todo.get(':todo/owner', ':db/id') || '',\n    onChange: e => transact([{\n      ':db/id': todo.get(':db/id'),\n      ':todo/owner': Number(e.target.value)\n    }])\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\"\n  }), users.map(user => /*#__PURE__*/React.createElement(\"option\", {\n    key: user.get(':db/id'),\n    value: user.get(':db/id')\n  }, user.get(':user/name')))));\n};"],
"names":["HomebaseProvider","useTransact","useQuery","window","homebase","react","config","schema","initialData","Date","App","React","createElement","Todos","TodoInput","TodoList","transact","onSubmit","e","preventDefault","target","elements","value","reset","autoFocus","type","name","placeholder","autoComplete","required","todos","sort","a","b","get","map","todo","Todo","key","TodoCheck","style","textDecoration","TodoProject","TodoOwner","color","toLocaleString","onChange","checked","projects","Fragment","htmlFor","id","Number","project","users","user","$jscomp$tmp$exports$module$name"]
}
